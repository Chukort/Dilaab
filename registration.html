<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dilaab | Registration</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
</head>
<body class="container">
    <main style="max-width: 500px; margin: auto; padding-top: 50px;">
        <article>
            <header>
                <hgroup>
                    <h1>Dilaab</h1>
                    <h2>Event Registration</h2>
                </hgroup>
            </header>
            
            <form id="regForm">
                <label for="fullname">Full Name</label>
                <input type="text" id="fullname" name="fullname" placeholder="Juan Dela Cruz" required>
                
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="name@example.com" required>

                <button type="submit" id="submitBtn">Submit Registration</button>
            </form>
            
            <div id="msg" style="display:none; text-align:center; padding: 10px; border-radius: 5px;"></div>
        </article>
    </main>

    <script>
        const scriptURL = 'https://script.google.com/macros/library/d/1t2cNpyaAFdepEnkL5dfDoEw8zXRfT1nvZC3iLMWs6iW-OaM4h8ognkaL/4';
        const form = document.getElementById('regForm');
        const btn = document.getElementById('submitBtn');
        const msg = document.getElementById('msg');

        form.addEventListener('submit', e => {
            e.preventDefault();
            btn.disabled = true;
            btn.innerText = "Sending to Database...";
            
            fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => {
                    btn.disabled = false;
                    btn.innerText = "Submit Registration";
                    msg.style.display = "block";
                    msg.style.backgroundColor = "#d4edda";
                    msg.innerText = "Success! You are now registered.";
                    form.reset();
                })
                .catch(error => {
                    btn.disabled = false;
                    btn.innerText = "Submit Registration";
                    msg.style.display = "block";
                    msg.style.backgroundColor = "#f8d7da";
                    msg.innerText = "Error: Could not save data.";
                    console.error('Error!', error.message);
                });
        });
    </script>
</body>
</html>
